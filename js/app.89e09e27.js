(function(e){function t(t){for(var i,s,c=t[0],o=t[1],l=t[2],f=0,g=[];f<c.length;f++)s=c[f],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&g.push(n[s][0]),n[s]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);u&&u(t);while(g.length)g.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],i=!0,c=1;c<r.length;c++){var o=r[c];0!==n[o]&&(i=!1)}i&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var i={},n={app:0},a=[];function s(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=i,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(r,i,function(t){return e[t]}.bind(null,i));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/filters/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=o;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),n=(r("0436"),r("b7b2"),r("6dfc"),r("4a7a")),a=r.n(n),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"basic-wrapper"},[r("router-view")],1)])},c=[],o=r("2877"),l={},u=Object(o["a"])(l,s,c,!1,null,null,null),f=u.exports,g=r("8c4f"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"homepage"},[r("Filters"),r("List")],1)},p=[],m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"filters"},[r("div",{staticClass:"filters__block"},[r("h3",[e._v("city")]),r("v-select",{attrs:{label:"name",options:e.cities,reduce:function(e){return e.id},placeholder:"click to select"},model:{value:e.currentCity,callback:function(t){e.currentCity=t},expression:"currentCity"}})],1),r("div",{staticClass:"filters__block"},[r("h3",[e._v("categories")]),r("div",{staticClass:"checkbox-block"},e._l(e.categories,(function(t){return r("label",{key:t.id},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedCategories,expression:"selectedCategories"}],attrs:{id:t.id,type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.selectedCategories)?e._i(e.selectedCategories,t.id)>-1:e.selectedCategories},on:{change:function(r){var i=e.selectedCategories,n=r.target,a=!!n.checked;if(Array.isArray(i)){var s=t.id,c=e._i(i,s);n.checked?c<0&&(e.selectedCategories=i.concat([s])):c>-1&&(e.selectedCategories=i.slice(0,c).concat(i.slice(c+1)))}else e.selectedCategories=a}}}),r("div"),r("p",[e._v(" "+e._s(t.name)+" "),r("span",[e._v(" ("+e._s(e.getItemsInCategory(t.id))+") ")])])])})),0)]),e._m(0),r("div",{staticClass:"filters__button-price-block"},[r("div",[r("span",[e._v(e._s(e.minRange)+"$")]),r("span",[e._v("-")]),r("span",[e._v(e._s(e.maxRange)+"$")])]),r("button",{attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.filterSubmit(t)}}},[e._v(" filter ")])])])},y=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"filters__block"},[r("h3",[e._v("price")]),r("div",{attrs:{id:"no-ui-slider"}})])}],h=(r("a4d3"),r("4de4"),r("4160"),r("a15b"),r("e439"),r("dbb4"),r("b64b"),r("ac1f"),r("1276"),r("159b"),r("ade3")),b=r("e9fa"),v=r.n(b),O=r("2f62");function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P={name:"Filters",data:function(){return{minRange:null,maxRange:null,currentCity:null,selectedCategories:[],sliderProps:{startMin:this.$store.getters.getMinRange||0,startMax:this.$store.getters.getMaxRange||100,min:this.$store.getters.getMinRange||0,max:this.$store.getters.getMaxRange||100},ragePriceSlider:null}},computed:C({},Object(O["d"])(["categories","cities"]),{},Object(O["c"])(["getItemsInCategory","getMinRange","getMaxRange"])),mounted:function(){var e=this;Object.keys(this.$route.query).length&&(this.setParamsFromQuery(),this.sendFilters()),this.ragePriceSlider=v.a.create(document.getElementById("no-ui-slider"),{start:[this.minRange||this.sliderProps.startMin,this.maxRange||this.sliderProps.startMax],connect:!0,range:{min:this.sliderProps.min,max:this.sliderProps.max}}),this.ragePriceSlider.on("update",(function(t,r){e[r?"maxRange":"minRange"]=parseInt(t[r],0)}))},methods:C({},Object(O["b"])(["sendFilters"]),{filterSubmit:function(){this.setUrlFromParams(),this.sendFilters()},sendFilters:function(){this.$store.dispatch("sendFilters",{minRange:this.minRange,maxRange:this.maxRange,currentCity:this.currentCity,selectedCategories:this.selectedCategories})},setUrlFromParams:function(){var e={};this.minRange!==this.$store.getters.getMinRange&&(e.minrange=this.minRange),this.maxRange!==this.$store.getters.getMaxRange&&(e.maxrange=this.maxRange),this.currentCity&&(e.currentcity=this.currentCity),this.selectedCategories.length&&(e.categories=this.selectedCategories.join("-")),this.$router.push({path:this.$route.path,query:e})},setParamsFromQuery:function(){this.$route.query.minrange&&(this.minRange=this.$route.query.minrange),this.$route.query.maxrange&&(this.maxRange=this.$route.query.maxrange),this.$route.query.categories&&(this.selectedCategories=this.$route.query.categories.split("-")),this.$route.query.currentcity&&(this.currentCity=+this.$route.query.currentcity)}})},j=P,w=Object(o["a"])(j,m,y,!1,null,null,null),x=w.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.getSelectedList.length?r("div",{staticClass:"filtered-list"},e._l(e.getSelectedList,(function(t){return r("div",{key:t.id,staticClass:"filtered-list__item"},[r("div",{staticClass:"filtered-list__item--image-block"},[r("img",{attrs:{src:"https://www.fillmurray.com/640/360",alt:"item-image"}}),r("h4",[e._v(" "+e._s(e.getCityName(t.city).name)+" ")])]),r("div",{staticClass:"filtered-list__item--bottom-block"},[r("h2",[e._v(" "+e._s(t.name)+" ")]),r("div",{staticClass:"filtered-list__item--tag-price-block"},[r("p",{staticClass:"filtered-list__item--tag-price-block__tag"},[e._v(" "+e._s(e.getCategoryName(t.category))+" ")]),r("p",{staticClass:"filtered-list__item--tag-price-block__price"},[e._v(" $"+e._s(t.price)+" ")])])])])})),0):r("div",{staticClass:"filtered-list --error"},[r("h2",[e._v("OOPS")]),r("p",[e._v(" Your search did not match ")])])},k=[];function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M={name:"List",computed:S({},Object(O["c"])(["getSelectedList","getCategoryName","getCityName"]))},L=M,F=Object(o["a"])(L,R,k,!1,null,"fd48450a",null),N=F.exports,D={name:"home",components:{Filters:x,List:N}},E=D,q=Object(o["a"])(E,d,p,!1,null,null,null),I=q.exports;i["a"].use(g["a"]);var A=[{path:"/",name:"home",component:I,query:{}}],T=new g["a"]({routes:A}),J=T,Q=(r("7db0"),r("13d5"),r("b0c0"),r("2909")),U=[{id:1,name:"Category 1"},{id:2,name:"Category 2"},{id:3,name:"Category 3"},{id:4,name:"Category 4"},{id:5,name:"Category 5"}],B=[{id:1,name:"City 1"},{id:2,name:"City 2"},{id:3,name:"City 3"},{id:4,name:"City 4"},{id:5,name:"City 5"}],Y=[{id:1,name:"Name 1",city:1,category:2,price:50},{id:2,name:"Name 2",city:4,category:1,price:100},{id:3,name:"Name 3",city:5,category:1,price:1},{id:4,name:"Name 4",city:2,category:4,price:150},{id:5,name:"Name 5",city:3,category:5,price:200}];function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}i["a"].use(O["a"]);var H=new O["a"].Store({state:{categories:U,cities:B,defaultList:Y,filtersParams:null},mutations:{setNewFiltersParams:function(e,t){e.filtersParams=G({},t)}},actions:{sendFilters:function(e,t){e.commit("setNewFiltersParams",t)}},getters:{getCategoryName:function(e){return function(t){return e.categories.find((function(e){return e.id===t})).name}},getCityName:function(e){return function(t){return e.cities.find((function(e){return e.id===t}))}},getItemsInCategory:function(e,t){return function(e){return t.getSelectedList.filter((function(t){return t.category===e})).length}},getMinRange:function(e){return e.defaultList.reduce((function(e,t){return e<t.price?e:t.price}),1/0)},getMaxRange:function(e){return e.defaultList.reduce((function(e,t){return e>t.price?e:t.price}),-1/0)},getSelectedList:function(e){if(!e.filtersParams)return e.defaultList;var t=[];if(e.filtersParams.currentCity&&(t=e.defaultList.filter((function(t){return t.city===e.filtersParams.currentCity})),!t.length))return[];if(e.filtersParams.minRange)if(t.length){if(t=t.filter((function(t){return t.price>=e.filtersParams.minRange})),!t.length)return[]}else t=e.defaultList.filter((function(t){return t.price>=e.filtersParams.minRange}));if(e.filtersParams.maxRange)if(t.length){if(t=t.filter((function(t){return t.price<=e.filtersParams.maxRange})),!t.length)return[]}else t=e.defaultList.filter((function(t){return t.price<=e.filtersParams.maxRange}));if(e.filtersParams.selectedCategories.length){var r=[];e.filtersParams.selectedCategories.forEach((function(i){t.length?r.push.apply(r,Object(Q["a"])(t.filter((function(e){return e.category===+i})))):r.push.apply(r,Object(Q["a"])(e.defaultList.filter((function(e){return e.category===+i}))))})),t=r}return t}},modules:{}});a.a.props.components.default=function(){return{OpenIndicator:{render:function(e){return e("span")}}}},i["a"].config.productionTip=!1,i["a"].component("v-select",a.a),new i["a"]({router:J,store:H,render:function(e){return e(f)}}).$mount("#app")},b7b2:function(e,t,r){}});
//# sourceMappingURL=app.89e09e27.js.map